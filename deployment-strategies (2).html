<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Deployment Strategies</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Mono:wght@300;400;500&family=DM+Sans:ital,wght@0,300;0,400;0,500;1,400&display=swap');

:root {
  --bg: #080810;
  --surface: #0f0f1a;
  --card: #12121e;
  --border: #1c1c2e;
  --accent: #00e5a0;
  --accent2: #7b61ff;
  --accent3: #ff6b6b;
  --warn: #ffb84d;
  --text: #e4e4f0;
  --muted: #5a5a72;
  --muted2: #8888a8;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

body {
  background: var(--bg);
  color: var(--text);
  font-family: 'DM Sans', sans-serif;
  min-height: 100vh;
  overflow-x: hidden;
}

body::before {
  content: '';
  position: fixed; inset: 0;
  background-image:
    linear-gradient(rgba(255,255,255,.018) 1px, transparent 1px),
    linear-gradient(90deg, rgba(255,255,255,.018) 1px, transparent 1px);
  background-size: 44px 44px;
  pointer-events: none; z-index: 0;
}

.glow {
  position: fixed;
  width: 600px; height: 600px;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(0,229,160,.06) 0%, transparent 70%);
  top: -200px; left: -100px;
  pointer-events: none; z-index: 0;
}

.wrapper { position: relative; z-index: 1; max-width: 1060px; margin: 0 auto; padding: 48px 24px 100px; }

header { margin-bottom: 60px; }
.eyebrow {
  display: inline-flex; align-items: center; gap: 8px;
  font-family: 'DM Mono', monospace;
  font-size: 10px; letter-spacing: .22em; text-transform: uppercase;
  color: var(--accent); border: 1px solid rgba(0,229,160,.3);
  padding: 5px 14px; border-radius: 2px; margin-bottom: 24px;
  animation: fadeIn .5s ease both;
}
.eyebrow::before { content: '‚ñ∏'; font-size: 8px; }

header h1 {
  font-family: 'Syne', sans-serif;
  font-size: clamp(2.4rem, 5.5vw, 4rem);
  font-weight: 800; line-height: 1.0; letter-spacing: -.03em;
  animation: slideUp .7s cubic-bezier(.22,1,.36,1) .08s both;
}
header h1 em { color: var(--accent); font-style: normal; }
header p {
  margin-top: 18px; color: var(--muted2); font-size: .95rem;
  max-width: 560px; line-height: 1.7;
  animation: fadeIn .6s ease .18s both;
}

.tab-bar {
  display: flex; gap: 2px;
  background: var(--surface); border: 1px solid var(--border);
  padding: 3px; border-radius: 8px;
  margin-bottom: 36px;
  animation: fadeIn .5s ease .25s both;
  overflow-x: auto;
}
.tab-btn {
  flex: 1; min-width: max-content;
  font-family: 'Syne', sans-serif;
  font-size: .78rem; font-weight: 700;
  letter-spacing: .06em; text-transform: uppercase;
  padding: 10px 18px; border: none;
  background: transparent; color: var(--muted);
  border-radius: 5px; cursor: pointer;
  transition: all .2s;
}
.tab-btn:hover { color: var(--text); background: var(--border); }
.tab-btn.active { background: var(--accent); color: #000; }

.tab-section { display: none; }
.tab-section.active { display: block; animation: fadeIn .3s ease; }

.strategies-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 18px; margin-bottom: 32px;
}

.scard {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px; padding: 26px;
  cursor: pointer; position: relative;
  overflow: hidden;
  transition: transform .22s, border-color .22s, box-shadow .22s;
  animation: slideUp .45s cubic-bezier(.22,1,.36,1) both;
}
.scard:nth-child(1){animation-delay:.05s}
.scard:nth-child(2){animation-delay:.12s}
.scard:nth-child(3){animation-delay:.19s}
.scard:nth-child(4){animation-delay:.26s}
.scard:nth-child(5){animation-delay:.33s}
.scard:nth-child(6){animation-delay:.40s}

.scard:hover { transform: translateY(-4px); box-shadow: 0 12px 40px rgba(0,0,0,.4); }
.scard.active { border-color: var(--accent); box-shadow: 0 0 0 1px var(--accent), 0 8px 32px rgba(0,229,160,.1); }

.scard-stripe {
  position: absolute; top: 0; left: 0; right: 0; height: 3px; border-radius: 12px 12px 0 0;
}
.scard-top { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 12px; }
.scard-icon { font-size: 1.9rem; line-height: 1; }

.badge {
  font-family: 'DM Mono', monospace;
  font-size: 9px; letter-spacing: .12em; text-transform: uppercase;
  padding: 3px 7px; border-radius: 3px; font-weight: 500;
}
.badge-low  { background: rgba(0,229,160,.1);  color: var(--accent);  border: 1px solid rgba(0,229,160,.2); }
.badge-med  { background: rgba(255,184,77,.1);  color: var(--warn);    border: 1px solid rgba(255,184,77,.2); }
.badge-high { background: rgba(255,107,107,.1); color: var(--accent3); border: 1px solid rgba(255,107,107,.2); }

.scard-title { font-family:'Syne',sans-serif; font-size:1.05rem; font-weight:700; letter-spacing:-.01em; margin-bottom:8px; }
.scard-desc  { font-size:.84rem; color:var(--muted2); line-height:1.6; }
.scard-footer { margin-top:16px; padding-top:14px; border-top:1px solid var(--border); display:flex; gap:6px; flex-wrap:wrap; }
.tag { font-family:'DM Mono',monospace; font-size:.68rem; padding:3px 8px; background:var(--surface); border:1px solid var(--border); border-radius:3px; color:var(--muted); letter-spacing:.04em; }

.detail-panel { background:var(--card); border:1px solid var(--accent); border-radius:14px; padding:36px; margin-bottom:36px; display:none; animation:fadeIn .3s ease; }
.detail-panel.open { display:block; }

.dp-header { display:flex; align-items:center; gap:20px; margin-bottom:30px; padding-bottom:24px; border-bottom:1px solid var(--border); }
.dp-icon { font-size:2.8rem; line-height:1; }
.dp-title { font-family:'Syne',sans-serif; font-size:1.5rem; font-weight:800; letter-spacing:-.02em; }
.dp-subtitle { color:var(--muted2); font-size:.88rem; margin-top:4px; line-height:1.5; }

.dp-body { display:grid; grid-template-columns:1fr 1fr; gap:28px; }
@media(max-width:620px){ .dp-body { grid-template-columns:1fr; } }

.dp-col h3 { font-family:'DM Mono',monospace; font-size:.68rem; letter-spacing:.15em; text-transform:uppercase; color:var(--accent); margin-bottom:14px; }

.list-items { list-style:none; }
.list-items li { display:flex; gap:10px; align-items:flex-start; font-size:.85rem; line-height:1.55; padding:7px 0; border-bottom:1px solid var(--border); color:var(--muted2); }
.list-items li:last-child { border:none; }
.li-bullet { flex-shrink:0; font-size:.9rem; margin-top:1px; }
.list-items.pros .li-bullet { color:var(--accent); }
.list-items.cons .li-bullet { color:var(--accent3); }

.steps { list-style:none; }
.steps li { display:flex; gap:12px; align-items:flex-start; font-size:.85rem; line-height:1.55; margin-bottom:12px; }
.step-n { width:22px; height:22px; border-radius:50%; background:var(--accent); color:#000; font-family:'DM Mono',monospace; font-size:.68rem; font-weight:500; display:flex; align-items:center; justify-content:center; flex-shrink:0; margin-top:1px; }
.step-text { color:var(--muted2); }
.step-text strong { color:var(--text); }

.diagram-wrap { background:var(--surface); border:1px solid var(--border); border-radius:10px; padding:24px; margin-top:0; grid-column:1 / -1; }
.diagram-wrap h3 { font-family:'DM Mono',monospace; font-size:.68rem; letter-spacing:.15em; text-transform:uppercase; color:var(--accent); margin-bottom:16px; }
.diagram { display:flex; align-items:center; gap:6px; flex-wrap:wrap; }
.dbox { font-family:'DM Mono',monospace; font-size:.72rem; padding:8px 14px; border-radius:6px; background:var(--card); border:1px solid var(--border); position:relative; white-space:nowrap; }
.dbox.abox { border-color:var(--accent); color:var(--accent); }
.dbox.dim  { opacity:.35; }
.dbox.wbox { border-color:var(--warn); color:var(--warn); }
.dbox sup  { position:absolute; top:-7px; right:-4px; font-size:.6rem; background:var(--accent); color:#000; border-radius:3px; padding:1px 4px; line-height:1.4; }
.darr { color:var(--muted); font-size:.85rem; }

.comp-section { }
.section-h { font-family:'Syne',sans-serif; font-size:1.2rem; font-weight:700; letter-spacing:-.01em; margin-bottom:20px; }
.section-h em { color:var(--accent); font-style:normal; }

.table-wrap { overflow-x:auto; border-radius:12px; border:1px solid var(--border); }
table { width:100%; border-collapse:collapse; font-size:.83rem; }
thead tr { background:var(--surface); }
th { font-family:'DM Mono',monospace; font-size:.66rem; letter-spacing:.12em; text-transform:uppercase; color:var(--muted); text-align:left; padding:13px 16px; border-bottom:1px solid var(--border); white-space:nowrap; }
td { padding:13px 16px; border-bottom:1px solid var(--border); vertical-align:middle; line-height:1.5; }
tr:last-child td { border:none; }
tr:hover td { background:rgba(255,255,255,.015); }
.col-strat { font-family:'Syne',sans-serif; font-weight:700; font-size:.88rem; }
.dot { display:inline-block; width:8px; height:8px; border-radius:50%; margin-right:6px; vertical-align:middle; }

.bar-wrap { display:flex; align-items:center; gap:8px; }
.bar-bg { height:5px; background:var(--border); border-radius:3px; flex:1; min-width:60px; }
.bar-fill { height:5px; border-radius:3px; }

.decision-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:16px; }
.dcard { background:var(--card); border:1px solid var(--border); border-radius:10px; padding:22px; animation:slideUp .4s cubic-bezier(.22,1,.36,1) both; }
.dcard:nth-child(1){animation-delay:.05s}.dcard:nth-child(2){animation-delay:.12s}.dcard:nth-child(3){animation-delay:.19s}.dcard:nth-child(4){animation-delay:.26s}
.dcard-q { font-family:'Syne',sans-serif; font-size:.9rem; font-weight:700; margin-bottom:12px; line-height:1.35; }
.dcard-q span { color:var(--accent); margin-right:6px; }
.dcard-options { list-style:none; }
.dcard-options li { font-size:.82rem; color:var(--muted2); padding:6px 0; border-bottom:1px solid var(--border); display:flex; gap:8px; align-items:flex-start; line-height:1.5; }
.dcard-options li:last-child { border:none; }
.dcard-options li .arr { color:var(--accent); flex-shrink:0; font-size:.8rem; margin-top:2px; }
.dcard-options li strong { color:var(--text); }

.cl-progress { display:flex; align-items:center; gap:14px; margin-bottom:24px; font-size:.83rem; color:var(--muted2); }
.cl-bar-bg { flex:1; height:5px; background:var(--border); border-radius:3px; }
.cl-bar-fill { height:5px; border-radius:3px; background:var(--accent); transition:width .4s; }
.cl-count { font-family:'DM Mono',monospace; font-size:.75rem; color:var(--accent); }

.cl-group { margin-bottom:32px; }
.cl-group-title { font-family:'Syne',sans-serif; font-size:.9rem; font-weight:700; letter-spacing:.02em; margin-bottom:14px; padding-bottom:10px; border-bottom:1px solid var(--border); display:flex; align-items:center; gap:10px; }
.phase-badge { font-family:'DM Mono',monospace; font-size:.65rem; letter-spacing:.1em; text-transform:uppercase; padding:3px 8px; border-radius:3px; background:rgba(0,229,160,.1); color:var(--accent); border:1px solid rgba(0,229,160,.2); }

.cl-items { list-style:none; }
.cl-item { display:flex; align-items:flex-start; gap:12px; font-size:.85rem; color:var(--muted2); line-height:1.55; padding:8px 0; border-bottom:1px solid var(--border); cursor:pointer; transition:color .15s; }
.cl-item:last-child { border:none; }
.cl-item:hover { color:var(--text); }
.cl-item.checked { text-decoration:line-through; opacity:.4; }
.checkbox { width:17px; height:17px; border-radius:4px; border:1px solid var(--muted); flex-shrink:0; display:flex; align-items:center; justify-content:center; margin-top:2px; transition:all .15s; font-size:.7rem; }
.cl-item.checked .checkbox { background:var(--accent); border-color:var(--accent); color:#000; }

@keyframes fadeIn { from{opacity:0} to{opacity:1} }
@keyframes slideUp { from{opacity:0;transform:translateY(14px)} to{opacity:1;transform:none} }
</style>
</head>
<body>
<div class="glow"></div>
<div class="wrapper">

  <header>
    <div class="eyebrow">Software / Application Deployment</div>
    <h1>Deployment<br><em>Strategies</em></h1>
    <p>Six battle-tested strategies for shipping software safely. Click any card to explore tradeoffs, then use the Decision Guide or Checklist to put it into practice.</p>
  </header>

  <div class="tab-bar">
    <button class="tab-btn active" onclick="switchTab('strategies',this)">Strategies</button>
    <button class="tab-btn" onclick="switchTab('compare',this)">Compare All</button>
    <button class="tab-btn" onclick="switchTab('decide',this)">Decision Guide</button>
    <button class="tab-btn" onclick="switchTab('checklist',this)">Pre-Deploy Checklist</button>
  </div>

  <div id="tab-strategies" class="tab-section active">
    <div class="strategies-grid" id="cards-container"></div>
    <div class="detail-panel" id="detail-panel"></div>
  </div>

  <div id="tab-compare" class="tab-section comp-section">
    <div class="section-h">Side-by-Side <em>Comparison</em></div>
    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Strategy</th>
            <th>Downtime Risk</th>
            <th>Rollback Speed</th>
            <th>Infra Cost</th>
            <th>Complexity</th>
            <th>Best For</th>
          </tr>
        </thead>
        <tbody id="compare-tbody"></tbody>
      </table>
    </div>
  </div>

  <div id="tab-decide" class="tab-section">
    <div class="section-h">Which strategy <em>fits your situation?</em></div>
    <div class="decision-grid" id="decision-grid"></div>
  </div>

  <div id="tab-checklist" class="tab-section">
    <div class="section-h">Pre-Deploy <em>Checklist</em></div>
    <div class="cl-progress">
      <span>Progress</span>
      <div class="cl-bar-bg"><div class="cl-bar-fill" id="progress-bar" style="width:0%"></div></div>
      <span class="cl-count" id="progress-count">0 / 0</span>
    </div>
    <div id="checklist-container"></div>
  </div>
</div>

<script>
const strategies = [
  {
    id:'recreate', icon:'üîÑ', color:'#ff6b6b', risk:'high', riskLabel:'High Risk',
    title:'Recreate (Big Bang)',
    desc:'Shut down the old version completely, then deploy the new one. Simple but causes downtime.',
    tags:['Internal tools','Dev / staging','Non-critical apps'],
    subtitle:'Stop old ‚Üí deploy new ‚Üí restart. Zero overlap, full downtime.',
    pros:['Simplest to implement and reason about','No version conflicts or state drift','Lowest infrastructure cost','Clean slate ‚Äî no legacy code running in parallel'],
    cons:['Guaranteed downtime during deployment','No partial rollback ‚Äî must redeploy old version','Users experience a hard outage window','High risk for database schema changes'],
    steps:[
      {t:'Announce maintenance window',d:'Notify users in advance; update your status page.'},
      {t:'Scale down / stop old version',d:'Terminate running instances of the current app.'},
      {t:'Deploy new version',d:'Push the new build to your servers or cluster.'},
      {t:'Run smoke tests',d:'Verify the new version is healthy before restoring traffic.'},
      {t:'Re-open traffic',d:'Lift the maintenance window and monitor closely.'},
    ],
    diagram:'<div class="dbox dim">v1 (stopped)</div><div class="darr">‚Üí</div><div class="dbox abox">v2 (live) <sup>NEW</sup></div>',
    compare:{downtime:'High',rollback:'Slow',cost:'Low',complexity:'Low',best:'Internal / staging'},
  },
  {
    id:'rolling', icon:'üåÄ', color:'#7b61ff', risk:'med', riskLabel:'Med Risk',
    title:'Rolling Update',
    desc:'Replace old instances with new ones gradually ‚Äî a few at a time ‚Äî until fully migrated.',
    tags:['Kubernetes','Stateless services','High availability'],
    subtitle:'Instances replaced in batches; availability maintained throughout.',
    pros:['No downtime when health checks are configured well','Uses existing infrastructure ‚Äî no extra cost','Native to Kubernetes (maxUnavailable / maxSurge)','Automatic abort on failed health checks'],
    cons:['Both versions run simultaneously ‚Äî API must be compatible','Full rollback is slow (re-roll all instances)','Traffic split is not user-controlled','Hard to test new version in isolation before rollout'],
    steps:[
      {t:'Set rolling update parameters',d:'Define maxUnavailable and maxSurge in your Deployment spec.'},
      {t:'Trigger deployment',d:'CI/CD pushes the new image; orchestrator begins replacing pods.'},
      {t:'Monitor health checks',d:'Each new pod must pass readiness probes before the next batch starts.'},
      {t:'Watch metrics during rollout',d:'Track error rate, latency, and saturation in real time.'},
      {t:'Complete or rollback',d:'If metrics degrade, kubectl rollout undo to revert.'},
    ],
    diagram:'<div class="dbox abox">v2</div><div class="dbox abox">v2</div><div class="dbox dim">v1</div><div class="dbox dim">v1</div>',
    compare:{downtime:'Low',rollback:'Slow',cost:'Low',complexity:'Medium',best:'Stateless microservices'},
  },
  {
    id:'bluegreen', icon:'üü¢', color:'#00e5a0', risk:'low', riskLabel:'Low Risk',
    title:'Blue / Green',
    desc:'Run two identical environments. Flip the router from Blue (old) to Green (new) in one atomic cut.',
    tags:['Production apps','Zero downtime','Fast rollback'],
    subtitle:'Two full environments exist simultaneously; traffic flips in an instant.',
    pros:['Near-instant rollback ‚Äî just flip the router back','Zero downtime during the cutover','Green is fully tested before receiving any live traffic','Clean separation between versions'],
    cons:['Doubles infrastructure cost during deployment','Database migrations must be backward-compatible with both versions','Idle environment wastes resources if kept warm long-term','Requires load balancer / DNS flexibility'],
    steps:[
      {t:'Deploy v2 to Green (idle)',d:'Green receives no live traffic yet.'},
      {t:'Run full test suite on Green',d:'Smoke tests, integration tests, sanity checks against prod data.'},
      {t:'Flip the router',d:'Update load balancer or DNS to route 100% of traffic to Green.'},
      {t:'Monitor production (Green)',d:'Watch for errors, latency spikes, and business metric anomalies.'},
      {t:'Decommission Blue or keep as standby',d:'Keep Blue warm for fast rollback; tear it down after confidence period.'},
    ],
    diagram:'<div class="dbox dim">Blue (v1)</div><div class="darr">‚Üí</div><div class="dbox">üîÄ Router</div><div class="darr">‚Üí</div><div class="dbox abox">Green (v2) <sup>LIVE</sup></div>',
    compare:{downtime:'None',rollback:'Instant',cost:'High',complexity:'Medium',best:'High-value production apps'},
  },
  {
    id:'canary', icon:'üê§', color:'#ffb84d', risk:'low', riskLabel:'Low Risk',
    title:'Canary Release',
    desc:'Ship to a small subset of users first. Expand gradually as metrics confirm the new version is healthy.',
    tags:['Risk-averse teams','Large user bases','Gradual rollouts'],
    subtitle:'Real users validate v2 ‚Äî but blast radius of failures stays contained.',
    pros:['Real production validation with limited exposure','Data-driven: promote or abort based on live metrics','Easy to halt ‚Äî drop canary % to 0 instantly','Builds team confidence before full rollout'],
    cons:['Two versions live simultaneously ‚Äî need API compatibility','Requires smart traffic routing (service mesh, feature flags, or LB weights)','Longer total deployment timeline than a hard cutover','Observability must be excellent to catch regressions early'],
    steps:[
      {t:'Deploy v2 alongside v1',d:'Both versions active; routing rules control the traffic split.'},
      {t:'Route 5‚Äì10% of traffic to v2',d:'Start with internal users or a random user shard.'},
      {t:'Monitor canary-specific metrics',d:'Error rate, p99 latency, conversions ‚Äî compare against v1 baseline.'},
      {t:'Increment traffic in gates',d:'10% ‚Üí 25% ‚Üí 50% ‚Üí 100%, pausing at each stage for validation.'},
      {t:'Promote or rollback',d:'Full promote if healthy; route 0% to v2 and roll back if issues found.'},
    ],
    diagram:'<div class="dbox abox">v1 <sup>90%</sup></div><div class="darr">+</div><div class="dbox wbox">v2 üê§ <sup>10%</sup></div>',
    compare:{downtime:'None',rollback:'Fast',cost:'Medium',complexity:'High',best:'Large-scale, risk-sensitive'},
  },
  {
    id:'ab', icon:'üî¨', color:'#7b61ff', risk:'low', riskLabel:'Low Risk',
    title:'A/B Testing Deploy',
    desc:'Route specific user segments to different versions based on attributes ‚Äî ID, region, device, or feature flag.',
    tags:['Feature experiments','Product teams','Analytics-driven'],
    subtitle:'Intentional segmentation: not just a safety net ‚Äî an experiment framework.',
    pros:['Validates UX or product hypotheses with real users','Fully controlled cohort targeting per segment','Enables data-driven product decisions','Can run multiple experiments simultaneously'],
    cons:['Not a primary safety strategy ‚Äî use canary for that','Requires feature flag infrastructure (LaunchDarkly, Unleash, etc.)','Segment bleed can corrupt experiment results','Analysis complexity grows with overlapping experiments'],
    steps:[
      {t:'Define your hypothesis',d:'What user behavior or metric are you trying to improve?'},
      {t:'Segment users',d:'Use feature flags or HTTP headers to route cohort A ‚Üí v1, cohort B ‚Üí v2.'},
      {t:'Instrument analytics',d:'Track conversion, engagement, or your primary KPI per segment.'},
      {t:'Wait for statistical significance',d:"Don't stop early ‚Äî run until sufficient sample size is reached."},
      {t:'Ship the winner',d:'Roll the winning variant to 100% and clean up the flag.'},
    ],
    diagram:'<div class="dbox">üë• Users</div><div class="darr">‚Üí</div><div class="dbox abox">Segment A ‚Üí v1</div><div class="darr"> / </div><div class="dbox wbox">Segment B ‚Üí v2</div>',
    compare:{downtime:'None',rollback:'Fast',cost:'Medium',complexity:'High',best:'Product experimentation'},
  },
  {
    id:'shadow', icon:'üë§', color:'#5a5a72', risk:'low', riskLabel:'Low Risk',
    title:'Shadow Deploy',
    desc:'Mirror live traffic to the new version silently. v2 runs in parallel but its responses are discarded.',
    tags:['ML model testing','Perf benchmarking','High-risk migrations'],
    subtitle:'v2 processes real load, but users only ever see v1 output.',
    pros:['Zero user impact ‚Äî responses always come from v1','Tests v2 under authentic production load patterns','Ideal for ML/AI model validation and DB migration testing','Reveals latency and correctness issues before go-live'],
    cons:['Double compute cost while shadow is running','Discarded responses cannot validate UX outcomes','Side effects (writes, emails, external APIs) must be suppressed in v2','Complex traffic mirroring setup at proxy/LB layer'],
    steps:[
      {t:'Deploy v2 in shadow mode',d:'v2 is running but receives only mirrored (copied) requests.'},
      {t:'Mirror traffic at proxy layer',d:'Identical requests sent to both v1 and v2; v2 responses discarded.'},
      {t:'Suppress v2 side effects',d:'Disable emails, DB writes, and external API calls in shadow mode.'},
      {t:'Compare outputs & metrics',d:'Log v2 responses; diff against v1 for correctness, latency, and errors.'},
      {t:'Promote using Blue/Green or Canary',d:'Once confident, use another strategy to cut traffic over to v2.'},
    ],
    diagram:'<div class="dbox abox">v1 ‚Üí Users üë§</div><div class="darr">+</div><div class="dbox dim">v2 shadow üïµÔ∏è (discarded)</div>',
    compare:{downtime:'None',rollback:'N/A',cost:'High',complexity:'Very High',best:'ML / high-risk migrations'},
  },
];

const decisions = [
  {q:'How much downtime can you tolerate?',icon:'‚è±Ô∏è',options:[
    {cond:'Zero ‚Äî must stay live',rec:'Blue/Green, Canary, or Shadow'},
    {cond:'Short scheduled window is OK',rec:'Recreate (simplest, cheapest)'},
    {cond:'Brief gaps acceptable',rec:'Rolling Update'},
  ]},
  {q:'How fast do you need to roll back?',icon:'‚Ü©Ô∏è',options:[
    {cond:'Instantly (seconds)',rec:'Blue/Green'},
    {cond:'Within a few minutes',rec:'Canary (drop % to 0)'},
    {cond:'Slow rollback is acceptable',rec:'Rolling or Recreate'},
  ]},
  {q:"What's your infrastructure budget?",icon:'üí∏',options:[
    {cond:'Tight ‚Äî minimize cost',rec:'Recreate or Rolling Update'},
    {cond:'Moderate budget available',rec:'Canary or A/B'},
    {cond:'Cost is not a constraint',rec:'Blue/Green or Shadow'},
  ]},
  {q:'What are you trying to validate?',icon:'üîç',options:[
    {cond:'Safety / no regressions',rec:'Canary or Blue/Green'},
    {cond:'Product or UX hypothesis',rec:'A/B Testing'},
    {cond:'Performance under real traffic',rec:'Shadow Deploy'},
  ]},
];

const checklist = [
  {phase:'Code & Build',items:[
    'All feature branches merged and conflicts resolved',
    'Unit tests pass in CI with zero skips',
    'Integration tests pass against staging environment',
    'Code review approved by at least one other engineer',
    'No secrets or credentials committed to the repository',
    'Build artifacts are versioned and tagged in the image registry',
  ]},
  {phase:'Pre-Deployment',items:[
    'Database migrations are backward-compatible (old app can read new schema)',
    'Feature flags configured correctly for initial rollout percentage',
    'Rollback plan documented and tested in staging',
    'Deployment window communicated to stakeholders / users',
    'On-call engineer confirmed, paged, and ready',
    'Monitoring dashboards open with baseline metrics noted',
    'Alert thresholds set for error rate, latency, and saturation',
  ]},
  {phase:'Deployment Execution',items:[
    'Deployment triggered from the correct branch or tagged release',
    'Health checks passing on new instances before traffic shifts',
    'Initial traffic routing configured per chosen strategy',
    'Logs are tailing and no anomalous errors in the first 5 minutes',
    'Key user flows smoke-tested manually in production post-deploy',
  ]},
  {phase:'Post-Deployment',items:[
    'Error rate is within acceptable baseline threshold',
    'p99 latency has not regressed from the pre-deploy baseline',
    'Business metrics (conversion, signups, etc.) trending normally',
    'Canary / shadow version promoted or decommissioned cleanly',
    'Old version or Blue environment scaled down to save cost',
    'Deployment noted in changelog and incident log',
    'Brief retrospective scheduled if anything went wrong',
  ]},
];

// ‚îÄ‚îÄ Render Cards ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
function riskClass(r){return r==='high'?'badge-high':r==='med'?'badge-med':'badge-low';}

document.getElementById('cards-container').innerHTML = strategies.map(s=>`
  <div class="scard" id="card-${s.id}" onclick="showDetail('${s.id}')">
    <div class="scard-stripe" style="background:${s.color}"></div>
    <div class="scard-top">
      <div class="scard-icon">${s.icon}</div>
      <span class="badge ${riskClass(s.risk)}">${s.riskLabel}</span>
    </div>
    <div class="scard-title">${s.title}</div>
    <div class="scard-desc">${s.desc}</div>
    <div class="scard-footer">${s.tags.map(t=>`<span class="tag">${t}</span>`).join('')}</div>
  </div>
`).join('');

// ‚îÄ‚îÄ Detail Panel ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
let activeId = null;
function showDetail(id){
  if(activeId===id){
    document.getElementById('detail-panel').classList.remove('open');
    document.querySelectorAll('.scard').forEach(c=>c.classList.remove('active'));
    activeId=null; return;
  }
  activeId=id;
  document.querySelectorAll('.scard').forEach(c=>c.classList.remove('active'));
  document.getElementById(`card-${id}`).classList.add('active');
  const s=strategies.find(x=>x.id===id);
  const panel=document.getElementById('detail-panel');
  panel.innerHTML=`
    <div class="dp-header">
      <div class="dp-icon">${s.icon}</div>
      <div>
        <div class="dp-title">${s.title}</div>
        <div class="dp-subtitle">${s.subtitle}</div>
      </div>
    </div>
    <div class="dp-body">
      <div class="dp-col">
        <h3>‚ú¶ Pros</h3>
        <ul class="list-items pros">${s.pros.map(p=>`<li><span class="li-bullet">‚úì</span>${p}</li>`).join('')}</ul>
      </div>
      <div class="dp-col">
        <h3>‚ú¶ Cons</h3>
        <ul class="list-items cons">${s.cons.map(c=>`<li><span class="li-bullet">‚úó</span>${c}</li>`).join('')}</ul>
      </div>
      <div class="dp-col">
        <h3>‚ú¶ How It Works</h3>
        <ol class="steps">${s.steps.map((st,i)=>`<li><div class="step-n">${i+1}</div><div class="step-text"><strong>${st.t}</strong><br>${st.d}</div></li>`).join('')}</ol>
      </div>
      <div class="dp-col">
        <h3>‚ú¶ Best For</h3>
        <div style="display:flex;flex-wrap:wrap;gap:6px">${s.tags.map(t=>`<span class="tag">${t}</span>`).join('')}</div>
      </div>
      <div class="diagram-wrap">
        <h3>‚ú¶ Visual Flow</h3>
        <div class="diagram">${s.diagram}</div>
      </div>
    </div>
  `;
  panel.classList.add('open');
  setTimeout(()=>panel.scrollIntoView({behavior:'smooth',block:'nearest'}),50);
}

// ‚îÄ‚îÄ Compare Table ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const bars={High:'80%',Low:'22%',None:'5%',Medium:'55%','Very High':'100%',Instant:'100%',Fast:'78%',Slow:'28%','N/A':'5%'};
const downColors={None:'#00e5a0',Low:'#7b61ff',High:'#ff6b6b',Medium:'#ffb84d'};
document.getElementById('compare-tbody').innerHTML=strategies.map(s=>{
  const c=s.compare;
  return`<tr>
    <td><span class="col-strat"><span class="dot" style="background:${s.color}"></span>${s.title}</span></td>
    <td><div class="bar-wrap"><div class="bar-bg"><div class="bar-fill" style="width:${bars[c.downtime]||'50%'};background:${downColors[c.downtime]||'var(--muted)'}"></div></div><span style="font-size:.78rem;color:var(--muted2);white-space:nowrap">${c.downtime}</span></div></td>
    <td><div class="bar-wrap"><div class="bar-bg"><div class="bar-fill" style="width:${bars[c.rollback]||'50%'};background:#7b61ff"></div></div><span style="font-size:.78rem;color:var(--muted2);white-space:nowrap">${c.rollback}</span></div></td>
    <td><span style="font-size:.83rem;color:${c.cost==='Low'?'#00e5a0':c.cost==='High'?'#ff6b6b':'#ffb84d'}">${c.cost}</span></td>
    <td><span style="font-size:.83rem;color:var(--muted2)">${c.complexity}</span></td>
    <td><span style="font-size:.83rem;color:var(--muted2)">${c.best}</span></td>
  </tr>`;
}).join('');

// ‚îÄ‚îÄ Decision Grid ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
document.getElementById('decision-grid').innerHTML=decisions.map(d=>`
  <div class="dcard">
    <div class="dcard-q"><span>${d.icon}</span>${d.q}</div>
    <ul class="dcard-options">
      ${d.options.map(o=>`<li><span class="arr">‚ñ∏</span><span>If <em style="color:var(--text)">${o.cond}</em> ‚Üí <strong>${o.rec}</strong></span></li>`).join('')}
    </ul>
  </div>
`).join('');

// ‚îÄ‚îÄ Checklist ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
const clState={};
function renderChecklist(){
  let html='';
  checklist.forEach((group,gi)=>{
    html+=`<div class="cl-group"><div class="cl-group-title"><span class="phase-badge">Phase ${gi+1}</span>${group.phase}</div><ul class="cl-items">`;
    group.items.forEach((item,ii)=>{
      const key=`${gi}-${ii}`;
      if(clState[key]===undefined) clState[key]=false;
      html+=`<li class="cl-item${clState[key]?' checked':''}" onclick="toggleCheck('${key}',this)"><div class="checkbox">${clState[key]?'‚úì':''}</div><span>${item}</span></li>`;
    });
    html+=`</ul></div>`;
  });
  document.getElementById('checklist-container').innerHTML=html;
  updateProgress();
}

function toggleCheck(key,el){
  clState[key]=!clState[key];
  el.classList.toggle('checked',clState[key]);
  el.querySelector('.checkbox').textContent=clState[key]?'‚úì':'';
  updateProgress();
}

function updateProgress(){
  const total=Object.keys(clState).length;
  const done=Object.values(clState).filter(Boolean).length;
  const pct=total?(done/total*100).toFixed(0):0;
  document.getElementById('progress-bar').style.width=pct+'%';
  document.getElementById('progress-count').textContent=`${done} / ${total}`;
}

function switchTab(name,btn){
  document.querySelectorAll('.tab-section').forEach(s=>s.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(b=>b.classList.remove('active'));
  document.getElementById('tab-'+name).classList.add('active');
  btn.classList.add('active');
}

renderChecklist();
</script>
</body>
</html>
